<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Advanced Compositing with NukeX and Nuke Studio|Using the Smart Vector Toolset">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Applying Motion&#160;Vectors to the Source</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/styles.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/tablet.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/mobile.css" rel="stylesheet" />
        <link href="../../assets/stylesheets/nuke_stylesheet.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../../assets/stylesheets/load.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../Default.html#comp_environment/smartpaint/generating_distortion.html">Open topic with navigation</a>
        </p>
        <script>/* <![CDATA[ */
			$(document).ready(function(){ 
			$('.dropDownMiniTOCmenu:not(:has([class*="MCMiniTocBox"]))').remove();
			});
		/* ]]> */</script>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <h1>Applying Motion&#160;Vectors to the Source</h1>
        <p>Once you've generated your motion vectors and added your paint to the source sequence, the VectorDistort node takes the paint from the reference frame and propagates it through the rest of the sequence using the motion vectors from the SmartVector node.</p>
        <h2><a name="Warping_the_Vectors"></a>Warping the Vectors</h2>
        <p>After generating your vectors, applying your corrections, and masking out areas of the sequence you don't want to process, use VectorDistort to push your work through the rest of the sequence.</p>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>1. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="1. &#160;">Add a VectorDistort node to the Node Graph and connect the <b>Src</b> input to your sequence, downstream of the paint or image you intend to propagate.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>2. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="2. &#160;">Connect the <b>SmartVector</b> input to either the SmartVector node or a Read node referencing the <b>.exr</b> files containing the motion vector data.</td>
            </tr>
        </table>
        <table>
            <col />
            <col />
            <tbody>
                <tr>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/smartpaint8_264x225.png" class="cm07" style="width: 264;height: 225;" />
                        </p>
                    </td>
                    <td>
                        <p>
                            <img src="../../assets/images/ug_images/smartpaint7_264x225.png" class="cm07" style="width: 264;height: 225;" />
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>3. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="3. &#160;">Double-click the VectorDistort node to open its properties, if they're not already open.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>4. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="4. &#160;">Scrub to the frame containing your paint or image and click <b>set to current frame</b> to set the VectorDistort reference frame.</td>
            </tr>
        </table>
        <p class="tip" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;TIP:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">TIP:</span> &#160;</span></span>If you know what frame your paint or image is applied to, you can type the frame number into the <b>reference frame</b> control manually.</p>
        <p class="numberedCont">Scrubbing in the Viewer at this stage introduces undesirable warping because the whole source frame is warped. As you move farther from the reference frame, the warping increases.</p>
        <table>
            <col />
            <col />
            <tbody>
                <tr>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/smartpaint9_264x197.png" class="cm07" style="width: 264;height: 197;" />
                        </p>
                    </td>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/smartpaint10_264x197.png" class="cm07" style="width: 264;height: 197;" />
                        </p>
                    </td>
                </tr>
                <tr>
                    <td class="caption">
                        <p>Warp close to the reference frame.</p>
                    </td>
                    <td class="caption">
                        <p>Warp far from the reference frame.</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>5. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="5. &#160;">Set the <b>mask channel</b> to the channel specified under <a href="#Masking" class="noPage MCXref xref xrefnoPage"><span style="color: #00b4e0;" class="mcFormatColor">Masking Warp Areas</span></a>. This limits the scope of the warp and speeds up processing time.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>6. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="6. &#160;">To apply the warp to the original sequence, premultiply the paint or image and then merge the result over the source.</td>
            </tr>
        </table>
        <p class="graphic">
            <img src="../../assets/images/ug_images/smartpaint11_453x341.png" class="cm12" style="width: 453;height: 341;" />
        </p>
        <p>For short sequences, or sequences with minimal movement and detail, your corrections should propagate nicely as shown.</p>
        <table>
            <col />
            <col />
            <tbody>
                <tr>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/smartpaint12_264x194.png" class="cm07" style="width: 264;height: 194;" />
                        </p>
                    </td>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/smartpaint13_264x194.png" class="cm07" style="width: 264;height: 194;" />
                        </p>
                    </td>
                </tr>
            </tbody>
        </table>
        <p>If you see that your corrections warp incorrectly over time, you can use VectorDistort's properties to massage the results (see <a href="improving_warps.html" class="MCXref xref"><span style="color: #00b4e0;" class="mcFormatColor">Improving Warps</span></a>) or use multiple VectorDistort nodes to apply warps for several reference frames (see <a href="multi_reference_frames.html" class="MCXref xref"><span style="color: #00b4e0;" class="mcFormatColor">Warping Multiple Reference Frames</span></a>).</p>
        <h2><a name="Masking"></a>Masking Warp Areas</h2>
        <p>VectorDistort warps the entire frame by default, so you can improve performance by masking out areas of the frame that you don't want to warp. Any pixels with a non-zero <b>mask channel</b> are warped, that is, anything within the mask. Unlike most mask channels, VectorDistort's mask applies a gradual warp from 0-1, where 0 is no warp and 1 is full warp.</p>
        <p>To apply a mask to the sequence:</p>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>1. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="1. &#160;">Add a Roto node downstream of your corrections to the source.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>2. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="2. &#160;">Draw a bezier on the <b>reference frame</b> around the area you want to warp.</td>
            </tr>
        </table>
        <p class="tip" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;TIP:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">TIP:</span> &#160;</span></span>You might find it easier to draw the mask if you enable the <b>Mat</b> display style. Press <b>M</b> over the Viewer to display your corrections.</p>
        <p class="graphic">
            <img src="../../assets/images/ug_images/smartpaint14_453x302.png" class="cm12" style="width: 453;height: 302;" />
        </p>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>3. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="3. &#160;">Now when you add a VectorDistort node to the script, set the <b>mask channel</b> to the channel specified in the Roto node. See <a href="#Warping_the_Vectors" class="noPage MCXref xref xrefnoPage"><span style="color: #00b4e0;" class="mcFormatColor">Warping the Vectors</span></a> for more details.</td>
            </tr>
        </table>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;NOTE:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">NOTE:</span> &#160;</span></span>If you use a custom mask channel, set the <b>mask channel</b> control to <b>all</b> to ensure the mask is applied.</p>
        <table style="width: 100%;border-bottom-style: solid;border-bottom-width: 1px;">
            <col />
            <tbody>
                <tr>
                    <td>
                        <p>&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="MCDropDown MCDropDown_Open dropDown dropDownMiniTOCmenu"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_MiniTOCmenu MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Topics In This Section</a></span>
            <div class="MCDropDownBody dropDownBody">
            </div>
        </div>
    </body>
    <script type="text/javascript">/* <![CDATA[ */
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-60569477-1', {'cookieDomain': 'none'});
	/* ]]> */</script>
    <script type="text/javascript">/* <![CDATA[ */
		$("document").ready(function ()
		{
		function postMe()
		{
		var cust = document.getElementById("search-field").value;
		console.log(cust);
		ga('send', 'event', "Nuke", "search", cust, 9);
		}
		var submitButton = $(".search-submit");
		submitButton.click(function() { postMe(); return true; } );
		var submit = $("input#search-field");
		submit.keypress(function(e) { if(e.keyCode==13) { postMe(); } return true; } );
		});
	/* ]]> */</script>
</html>