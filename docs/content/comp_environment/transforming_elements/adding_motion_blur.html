<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Compositing with Nuke|Transforming Elements">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Adding Motion Blur</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/styles.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/tablet.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/mobile.css" rel="stylesheet" />
        <link href="../../assets/stylesheets/nuke_stylesheet.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../../assets/stylesheets/load.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../Default.html#comp_environment/transforming_elements/adding_motion_blur.html">Open topic with navigation</a>
        </p>
        <script>/* <![CDATA[ */
			$(document).ready(function(){ 
			$('.dropDownMiniTOCmenu:not(:has([class*="MCMiniTocBox"]))').remove();
			});
		/* ]]> */</script>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <h1><a name="kanchor301"></a>Adding Motion Blur</h1>
        <p class="afterHead">The following nodes under the <span class="_Override" style="font-weight: bold;">Transform</span> menu have their own controls for adding motion blur to transformations:</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>Transform</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>TransformMasked</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>Card (3D)</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>CornerPin2D</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>Reconcile3D</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>Tracker</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>Stabilize2D</p>
        <p class="graphic">
            <img src="../../assets/images/ug_images/motionblur_add1.png" />
        </p>
        <p>These controls allow you to create motion blur without adding a separate node for it. The output is similar to a TimeBlur node (see <a href="../temporal_operations/applying_timeblur_filter.html" class="noPage MCXref xref xrefnoPage"><span style="color: #00b4e0;" class="mcFormatColor">Applying the TimeBlur Filter</span></a>), but rather than averaging the results of several whole images computed at steps over the shutter period, a number of samples are taken at many random times over the shutter period. This effectively gives many more "steps" and thus a smoother-looking result for a smaller total number of computations.</p>
        <table style="caption-side: top;">
            <col style="width: 5cm;" />
            <col style="width: 5cm;" />
            <tbody>
                <tr>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/motionblur_add2.png" />
                        </p>
                    </td>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/motionblur_add3.png" />
                        </p>
                    </td>
                </tr>
                <tr>
                    <td class="caption">Before rotation and motion <br />blur.</td>
                    <td class="caption">After rotation and motion <br />blur.</td>
                </tr>
            </tbody>
        </table>
        <p>When using several of these nodes in a row, the motion blur is concatenated, and the last transform in the chain defines the motion blur applied.</p>
        <h3>To Add Motion Blur</h3>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>1. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="1. &#160;">Open the transform node’s controls. </td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>2. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="2. &#160;">Create a transform and animate it. For instructions on how to do this, see the <a href="../../getting_started/using_interface/using_compositing_env.html" class="noPage MCXref xref xrefnoPage"><span style="color: #00b4e0;" class="mcFormatColor">Using the Compositing Environment</span></a> chapter.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>3. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="3. &#160;">In the <b>motionblur</b> field, enter the sampling rate. This affects the number of times the input is sampled over the shutter time. The higher the rate, the smoother the result. In many cases, a value of 1.0 is enough. Setting the value to 0 produces no motion blur.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>4. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="4. &#160;">In the <b>shutter</b> field, enter the number of frames the shutter stays open when motion blurring. For example, a value of 0.5 would correspond to half a frame. Increasing the value produces more blur, and decreasing the value less.</td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>5. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="5. &#160;">From the <b>shutteroffset</b> dropdown menu, select when the shutter opens and closes in relation to the current frame value:</td>
            </tr>
        </table>
        <p class="processBullet" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>to center the shutter around the current frame, select <b>centered</b>. For example, if you set the <b>shutter</b> value to 1 and your current frame is 30, the shutter stays open from frame 29.5 to 30.5.</p>
        <p class="processBullet" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>to open the shutter at the current frame, select <b>start</b>. For example, if you set the <b>shutter</b> value to 1 and your current frame is 30, the shutter stays open from frame 30 to 31.</p>
        <p class="processBullet" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>to close the shutter at the current frame, select <b>end</b>. For example, if you set the <b>shutter</b> value to 1 and your current frame is 30, the shutter stays open from frame 29 to 30.</p>
        <p class="processBullet" data-mc-autonum="• "><span class="autonumber"><span>• </span></span>to open the shutter at the time you specify, select <b>custom</b>. In the field next to the dropdown menu, enter a value (in frames) you want to add to the current frame. To open the shutter before the current frame, enter a negative value. For example, a value of -0.5 would open the shutter half a frame before the current frame.</p>
        <p class="graphic">
            <img src="../../assets/images/ug_images/motionblur_add4.png" />
        </p>
        <h3>To Add Motion Blur to an Image Rendered in a Third-party Application</h3>
        <p>Another way to add motion blur to your image is to use the VectorBlur node. VectorBlur takes each of your image’s pixels and blurs them in a straight line, using the u and v channels to determine the blur direction. </p>
        <p>VectorBlur expects the values from your input plates to be pixel space screen units, in other words one unit should be equal to one pixel. <span class="CustomProduct">Nuke</span> uses this information to calculate the distance that one pixel travels between two frames. So, in order to get a working motion blur result, you should make sure <span class="CustomProduct">Nuke</span> is getting correct values to work with. You might have files using varying values, particularly if you’ve used a third party application to create your input files. The following is an example of creating motion blur with the VectorBlur node using files written from a third party application.</p>
        <h4>To Create Motion Blur with the VectorBlur Node:</h4>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>1. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="1. &#160;">Read in your footage and motion blur files, for example an .exr file with a spinning donut and a .sgi file with motion blur vectors that are normalized to have values between 0 and 1. </td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>2. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="2. &#160;">Using the ShuffleCopy node, select which channels VectorBlur should read from your motion vector file (node input 1) and color image file (node input 2). In this case, you would use the motion vector file’s red and green channels as the motion u and v channels, and its alpha channel as the alpha channel. Meanwhile, the image file would output the red, green and blue channels for the main color image. </td>
            </tr>
        </table>
        <p class="numberedCont">With this setup, your ShuffleCopy node controls would look like this:</p>
        <p class="graphic">
            <img src="../../assets/images/ug_images/motionblur_shufflecopy_example.png" style="margin-left: 1.000063px;margin-top: 1.000063px;margin-bottom: 0.9997844px;" />
        </p>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>3. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="3. &#160;">Connect the VectorBlur node to the ShuffleCopy node. You also need to tell VectorBlur which motion vector channels to use, so change the <span class="_Override" style="font-weight: bold;">uv</span> <span class="_Override" style="font-weight: bold;">channels</span> control to <span class="_Override" style="font-weight: bold;">motion</span>. </td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>4. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="4. &#160;">If your motion vectors have been normalized to be between 0 and 1, you can set the u and v values in the <span class="_Override" style="font-weight: bold;">add</span> control to <span class="_Override" style="font-weight: bold;">-0.5</span> to offset the motion blur center. This is usually necessary for any motion vectors stored in an integer file format like 16 bit TIFF or TARGA. Vectors that go to negative x or y directions use half the numbers in the range and vectors that go positive use the other half. </td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>5. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="5. &#160;">With the <span class="_Override" style="font-weight: bold;">multiply</span> and <span class="_Override" style="font-weight: bold;">offset</span> controls, you can further adjust the amount of motion blur you want to produce. The <span class="_Override" style="font-weight: bold;">offset</span> value allows you to correct for normalization of your vector values, and the <span class="_Override" style="font-weight: bold;">multiply</span> value controls the magnitude of them. </td>
            </tr>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>6. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="6. &#160;">If the vectors have been premultiplied with the alpha channel, their value is not accurate in places where the alpha is not 1.0. You’ll want to check the <span class="_Override" style="font-weight: bold;">alpha</span> checkbox to use the input image’s alpha channel to help VectorBlur to deal with motion vectors that have been premultiplied by this alpha channel.</td>
            </tr>
        </table>
        <table style="caption-side: top;">
            <col style="width: 5cm;" />
            <col style="width: 5cm;" />
            <tbody>
                <tr>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/motionblur_example_alpha_off.png" style="margin-left: 1.000063px;margin-top: 1.000063px;margin-right: 0.9997691px;margin-bottom: 0.9997844px;" />
                        </p>
                    </td>
                    <td>
                        <p class="graphic">
                            <img src="../../assets/images/ug_images/motionblur_example_alpha_on.png" style="margin-left: 1.000063px;margin-top: 1.000063px;margin-right: 0.9997844px;margin-bottom: 0.9997691px;" />
                        </p>
                    </td>
                </tr>
                <tr>
                    <td class="caption"><span class="_Override" style="font-weight: bold;">Alpha</span> disabled.</td>
                    <td class="caption"><span class="_Override" style="font-weight: bold;">Alpha</span> enabled.</td>
                </tr>
            </tbody>
        </table>
        <table class="AutoNumber_p_numbered1" style="width: 100%; margin-left: 0;" cellspacing="0" cellpadding="0">
            <col style="width: 0px;" />
            <col style="width: 25px;" />
            <col style="width: auto;" />
            <tr>
                <td valign="top" />
                <td class="AutoNumber_p_numbered1" valign="top"><span>7. &#160;</span>
                </td>
                <td class="AutoNumber_p_numbered1" valign="top" data-mc-autonum="7. &#160;">Getting a good, even motion blur result largely depends on selecting the right calculation method. In the method dropdown, select:</td>
            </tr>
        </table>
        <p class="processBullet" data-mc-autonum="• "><span class="autonumber"><span>• </span></span><span class="_Override" style="font-weight: bold;">backward</span> - backward method is effective and fast but may not be accurate if you don't have motion vector values at all pixels throughout the whole frame</p>
        <p class="processBullet" data-mc-autonum="• "><span class="autonumber"><span>• </span></span><span class="_Override" style="font-weight: bold;">forward</span> - the forward method is slower, but it gives you a more accurate result, especially in cases where the vectors don't cover the whole frame. In this case, we know the motion vectors are not continuous, so selecting forward is a good option.</p>
        <table style="width: 100%;border-bottom-style: solid;border-bottom-width: 1px;">
            <col />
            <tbody>
                <tr>
                    <td>
                        <p>&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="MCDropDown MCDropDown_Open dropDown dropDownMiniTOCmenu"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_MiniTOCmenu MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Topics In This Section</a></span>
            <div class="MCDropDownBody dropDownBody">
            </div>
        </div>
    </body>
    <script type="text/javascript">/* <![CDATA[ */
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-60569477-1', {'cookieDomain': 'none'});
	/* ]]> */</script>
    <script type="text/javascript">/* <![CDATA[ */
		$("document").ready(function ()
		{
		function postMe()
		{
		var cust = document.getElementById("search-field").value;
		console.log(cust);
		ga('send', 'event', "Nuke", "search", cust, 9);
		}
		var submitButton = $(".search-submit");
		submitButton.click(function() { postMe(); return true; } );
		var submit = $("input#search-field");
		submit.keypress(function(e) { if(e.keyCode==13) { postMe(); } return true; } );
		});
	/* ]]> */</script>
</html>