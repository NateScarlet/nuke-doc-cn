<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Compositing with Nuke|Organizing Scripts">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Using Script Profiling</title>
        <link href="../../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/styles.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/tablet.css" rel="stylesheet" />
        <link href="../../../skins/default/stylesheets/components/mobile.css" rel="stylesheet" />
        <link href="../../assets/stylesheets/nuke_stylesheet.css" rel="stylesheet" />
        <script src="../../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../../assets/stylesheets/load.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../../Default.html#comp_environment/organizing_scripts/using_script_profiling.html">Open topic with navigation</a>
        </p>
        <script>/* <![CDATA[ */
			$(document).ready(function(){ 
			$('.dropDownMiniTOCmenu:not(:has([class*="MCMiniTocBox"]))').remove();
			});
		/* ]]> */</script>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <h1>Using Script Profiling</h1>
        <p><span class="CustomProduct">Nuke</span> can display accurate performance timing data onscreen or output it to XML file to help you troubleshoot bottlenecks in slow scripts. When performance timing is enabled, timing information is displayed in the Node Graph, and the nodes themselves are colored according to the proportion of the total processing time spent in each one, from green (fast nodes) through to red (slow nodes).</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;NOTE:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">NOTE:</span> &#160;</span></span>You can also access  timing information for individual nodes using Python. See the <i>Python Dev Guide</i>, <i>Performance Profiling</i> section for more information, or click <a href="http://www.thefoundry.co.uk/products/nuke/developers/90/pythondevguide/performance.html">here</a>.</p>
        <h2>Enabling Performance Timings</h2>
        <p> You can enable profiling from the Script Editor  or from the command line using the <b>-P</b> argument. You can also output the timing data to an XML file by adding the <b>-Pf</b> argument and a file name, though the output is only produced at render time.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;NOTE:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">NOTE:</span> &#160;</span></span>Enabling performance timings interactively or from the command line adds an extra processing overhead, but the data still provides an accurate picture of where processing time is spent in the script.</p>
        <h3>Outputting Performance Timings Onscreen</h3>
        <p>Enabling performance timings onscreen allows you to view cumulative data, as you work, on a per node basis.</p>
        <p>From the Script Editor, enter:</p>
        <p class="cmdline">nuke.startPerformanceTimers()</p>
        <p>From the command line, enter:</p>
        <p class="cmdline">./Nuke&lt;version&gt;/Nuke&lt;version&gt;.exe -P</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;NOTE:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">NOTE:</span> &#160;</span></span>You can reset the timing data using <span style="font-family: 'Courier New';">nuke.resetPerformanceTimers()</span> from the Script Editor.</p>
        <p>When the performance timers are active, the following information is available onscreen:</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span><b>cpu</b> - the time that the CPU spent executing the processing code,  in microseconds, aggregated over all CPU threads. For example, with multi-threaded processing this is typically much larger than the <b>wall</b> time. If the average CPU time per thread (<b>cpu</b> divided by the number of threads used) is much shorter than the <b>wall</b> time, this suggests the CPU threads have spent a lot of time not executing code and perhaps waiting on locks, which could indicate a performance problem.</p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;NOTE:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">NOTE:</span> &#160;</span></span>On Mac OS X and Windows, the CPU time is not currently accurate. On Mac OS X, the <b>cpu</b> value is always similar to the <b>wall</b> time.</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span><b>wall</b> - the time taken as it would be measured by a clock on the wall - the actual time you have to wait for the processing to complete. The <b>wall</b> time is also measured in microseconds.</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span><b>ops</b> - the number of operators called in the node. Operators are <span class="CustomProduct">Nuke</span>'s building blocks that perform certain tasks. Nodes can contain one or more ops. For example, when a node needs to resize something it would use a Transform op rather than an implementation of its own to do the same thing.</p>
        <p class="bulletedCont">See the <i>NDK Dev Guide</i>, <i>Terminology</i> section for more information, or click <a href="http://www.thefoundry.co.uk/products/nuke/developers/90/ndkdevguide/intro/terminology.html#op">here</a>.</p>
        <p class="bulleted" data-mc-autonum="• "><span class="autonumber"><span>• </span></span><b>memory</b> - the total amount of system memory used by the node.</p>
        <p>In addition to the timing information, nodes are color-coded according to their profiling, green through red, where red is a slow node. You can see from the example script that Defocus is a slow node, whereas Merge is doing no work at all.</p>
        <p class="graphic">
            <img src="../../assets/images/ug_images/perfomancedata1.png" />
        </p>
        <p class="note" data-mc-autonum="&lt;span style=&quot;color: Black;&quot; class=&quot;mcFormatColor&quot;&gt;NOTE:&lt;/span&gt; &#160;"><span class="autonumber"><span><span style="color: Black;" class="mcFormatColor">NOTE:</span> &#160;</span></span>You can stop displaying timing data using <span style="font-family: 'Courier New';">nuke.stopPerformanceTimers()</span> in the Script Editor.</p>
        <h3>Outputting Performance Timings to File</h3>
        <p>You can output the timing data to an XML file using the <b>-Pf</b> argument and a file name. The output is only produced at render time, either from a Write node or from a command line render. </p>
        <p>On Windows, for example, the following command writes profile data to file when you render from a Write node in the Node Graph:</p>
        <p class="cmdline"><span style="font-family: 'Courier New';">Nuke&lt;version&gt;\Nuke&lt;version&gt;.exe -Pf &lt;file path and name&gt;.xml</span>
        </p>
        <p>Rendering from the command line, the following command renders 10 frames from a script called <b>profileTest.nk </b>and writes the profile data to an XML file:</p>
        <p class="cmdline"><span style="font-family: 'Courier New';">Nuke&lt;version&gt;\Nuke&lt;version&gt;.exe -x -Pf C:\temp\profileTest.xml C:\temp\profileTest.nk 1-10</span>
        </p>
        <table style="width: 100%;border-bottom-style: solid;border-bottom-width: 1px;">
            <col />
            <tbody>
                <tr>
                    <td>
                        <p>&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="MCDropDown MCDropDown_Open dropDown dropDownMiniTOCmenu"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_MiniTOCmenu MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Topics In This Section</a></span>
            <div class="MCDropDownBody dropDownBody">
            </div>
        </div>
    </body>
    <script type="text/javascript">/* <![CDATA[ */
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-60569477-1', {'cookieDomain': 'none'});
	/* ]]> */</script>
    <script type="text/javascript">/* <![CDATA[ */
		$("document").ready(function ()
		{
		function postMe()
		{
		var cust = document.getElementById("search-field").value;
		console.log(cust);
		ga('send', 'event', "Nuke", "search", cust, 9);
		}
		var submitButton = $(".search-submit");
		submitButton.click(function() { postMe(); return true; } );
		var submit = $("input#search-field");
		submit.keypress(function(e) { if(e.keyCode==13) { postMe(); } return true; } );
		});
	/* ]]> */</script>
</html>