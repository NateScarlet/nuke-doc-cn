<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Tutorials|Video Tutorials|Compositing with Nuke">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Point Tracking</title>
        <link href="../../Skins/Default/Stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../Skins/Default/Stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/components/styles.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/components/tablet.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/components/mobile.css" rel="stylesheet" />
        <link href="../assets/stylesheets/nuke_stylesheet.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../assets/stylesheets/load.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Default.html#tutorials/point_tracking.html">Open topic with navigation</a>
        </p>
        <script>/* <![CDATA[ */
			$(document).ready(function(){ 
			$('.dropDownMiniTOCmenu:not(:has([class*="MCMiniTocBox"]))').remove();
			});
		/* ]]> */</script>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <h2>Point Tracking</h2>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - 2D Tracker</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54849683?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54849683" target="_blank">NUKE 7.0 - 2D Tracker Tutorial</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hello and welcome to this tutorial on the new Tracker in Nuke 7.0. If you have seen Dan’s tutorials on the Tracker, then you will have a good idea of the new interface. I am just going to start off and introduce you to it.</p>
                        <p>Bring up the Tracker in the same way as we did before, and as you can see already, there are a number of differences. The first thing you will notice is that we have a panel that allows us to store as many tracks as we want - we are no longer limited to the initial four.  And also, we have an <b>Export</b> panel that allows us to create CornerPins and Transforms easily from the Tracker. We also have a lot of the parameters and controls moved into the toolbar, and the tracking controls themselves moved away from the panel. This means we can now work full screen for all of our tracking. So, I will go full screen and we will work in this mode. I will go to the first frame and pick some tracking points. To create a tracking point, I can click this icon here, and while it’s active, wherever I click we get a new tracker. I could also hold the <b>Shift</b> key down and click anywhere at any time to add a new tracker.</p>
                        <p>In our panel, we now have four trackers. If I select one, it selects it in the Viewer, and if I select it in the Viewer, it selects it in the <b>Tracks</b> panel. The tracks selected are the ones that will be tracked when I click on <b>track forward</b> or <b>track backward</b>. You will also notice we now have hotkeys for the main tracking parameters, <b>C</b> and <b>V</b> for going forwards, <b>X</b> and <b>Z</b> for going backwards. We also have a new <b>stop tracking</b> button in the middle (<b>Esc</b>). There is also a <b>hide progress</b> button that stops the progress window from popping up when we are tracking. So I go back to tracking and if I select one track, you will see we have a zoom window that shows us in detail the size of the track. If I press <b>Shift</b>, I can zoom in and out to get even greater detail. Select track 1 and 3 and track forward, stop the track at this point, and use the <b>V</b> key to carry on tracking. The <b>Esc</b> key stops the tracking and <b>C</b> will track forward a frame at a time, and back to the <b>V</b>. Working this way makes it very, very fast to set up tracks to do your tracking. I will just go back to full-screen mode and create a new track. The one I have created is the one I can instantly track, so I will press <b>Z</b> to track backwards. So, we have a very nice and fast workflow.</p>
                        <p>Now let’s have a look at another tracking issue. So I am back in Nuke 6.3 for the moment, and I have a very old piece of footage that I would like to stabilize. There are a lot of luminance changes and lots of noise, all sorts of problems. If I try and track this with this Tracker, it is an instant failure. So let’s see how Nuke 7.0 gets on. Back in Nuke 7.0, I bring up the new Tracker.  I will hide the progress bar for the moment, and I will create a track in the same position as we did in Nuke 6.3. It’s closer, but it’s still not correct. If I go into <b>Settings</b>, there is a nice new feature called <b>adjust for luminance changes</b>, so turn that on and it will start working through the luminance changes for the shot. As we can see, we instantly have a much better track. So, if you are having problems tracking a shot with lots of luminance variations, turn this on and you should be able to get a much better track. I have also found it works on lots of other shots that don’t necessarily have luminance changes, so if you are having trouble it’s worth trying it and seeing if it works.</p>
                        <p>I will expand the interface because we have some other parameters that have been hidden because of the size of the interface. One of the advantages of this Tracker is that it lets us have as many tracks as we like. A very good technique when you have noisy footage is to put lots of tracks into the same area, and average them all together. Now this can be quite difficult at times because there are a lot of maths and expressions involved, and you may need more than the four tracks then you are offered in Nuke 6.3. Here I have six tracks. I <b>select all</b>, just make sure <b>adjust for luminance changes</b> is still on, and <b>track forward</b> (<b>V</b>).</p>
                        <p>Now we have this new traffic light system (<b>show error on track</b>), which would normally let us see where the tracks have any problems or not, but when they overlap like this they are not much use. Instead, I will use the Viewer to see if they are any good or not. When I am happy, I can select all of the tracks, and the new <b>average tracks</b> button will combine all of the tracks into one keyframed track. I now have one super track, in this case based on six tracks, but in the past I used sixteen or more trackers to get a good track. This is a great technique when you have noisy shots like this, but also when there is heat haze or any other disturbance that will get in the way of the pattern you are trying to track.</p>
                        <p>Back to our dancers, I would like to show you a couple of other new features that are in the new Tracker. Under the <b>Settings</b>, we have a new feature called <b>snap to markers</b>. What snap to markers will do is show what Nuke considers to be a good tracking point. You can choose from blobs or corners. Then with a green circle Nuke will show you a good candidate for tracking, and then snaps a tracker to that point.</p>
                        <p>Now I would like to show you a new feature that allow us to combine tracking and roto together.  What I will do is use the Tracker to allow me to roto around this greenscreen. I will create a Roto node and a Tracker node, as these both have to be present for this feature to work. I start creating my shape, and then I select those points, right-click, and select <b>Link to</b> &gt; <b>Tracker 1</b>. I can create new links, and what that has done is in the Tracker itself it’s created four track points, one for each of the points in the roto shape I created and selected. Now, in this shot the bottom of the greenscreen goes out of frame. I am going to deal with this using a neat feature in the Tracker. What I need to do is to be able to turn off tracks 1 and 2 as the greenscreen leaves the bottom of the frame. So now, using the new <b>Enable</b> button I can keyframe when the trackers are on or off, and now they won't bother to track at that point. I will select all four of them and hit <b>Z</b> to track backwards. You will see that when track 1 and 2 hit the bottom of the screen, they will no longer continue tracking, but tracks 3 and 4 will. So just close this track for the moment, and just look at the Roto. You can see now that those points of the roto have been linked. Where the other two trackers stopped, you can see at the bottom of the screen, these two parts of the Roto have also stopped. So I go back into the Tracker, and select track 1 and 2, right-click, and set <b>Interpolation</b> &gt; <b>Before/Linear</b> and now those points carry on based on the extrapolation of the curve, and as you see, my Roto has continued onwards. Now this is a stereo image, but the Tracker has only tracked one eye. When you work in stereo in Nuke 7.0,  you have this new <b>stereo offset</b> parameter, and I can split it open and offset the Roto to where it should be in the left view. Now we have both eyes rotoscoped using the Tracker.</p>
                        <p>This is Howard Jones for Foundry, goodbye.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - 2D Tracker: Getting Started</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54850944?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54850944" target="_blank">NUKE 7.0 - 2D Tracker - Getting Started</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hello, Dan Ring here, and in this tutorial I’m going to show you how to get started with Nuke’s new Tracker. Because a lot of things have changed, we are going to go back to basics on creating new tracks and setting up everything you need to get a good track. We will start by loading up the Tracker node. This is what the new Tracker node looks like. If you are familiar with the old Tracker, you can see all the track controls have been moved up to the toolbar. We have also removed the limit of four tracks and replaced it with a track table, allowing you to create as many tracks as you want.</p>
                        <p>Now, let’s start creating some tracks. You can do this in a couple of ways. The first is by using this <b>add track</b> button. This places a track in the center of the Viewer. The second way to create a track is to use the <b>add track</b> button up here, which when toggled on, allows us to quickly create tracks anywhere we click the mouse. We can also use the <b>Shift</b> key to toggle on or off this <b>add track</b> button. This is probably the quickest and easiest way to create lots of tracks.</p>
                        <p>There are a couple of interesting things here in the Viewer when we add tracks: the first thing is this zoom window. This allows us to get a good picture of where the track currently is in the frame, and also to position it. If we hold <b>Shift</b> and drag, we can magnify this zoom window even further and really get a much finer position. The second interesting thing is this keyframe window up here. This gives us a snapshot of all the keyframes for this track. For example, when we created this track, we created a key at frame 196. If we go back a few frames and move the Tracker to create a new keyframe, you can see a new window appears. Or we can create lots more of these. These windows become a lot more important when we look at our keyframe based tracking workflow later on. This will be covered in a later tutorial.</p>
                        <p>For the moment, let’s simplify things and let’s clear all of these tracks and start from the beginning. To delete all of these tracks, we need to first select them. We can do this by either dragging and selecting them all in the Viewer, or pressing <b>Ctrl</b>/<b>Cmd</b>+<b>A</b> or pressing the <b>select all</b> button here. Then to delete them, we can either go to the Viewer and click the <b>Delete</b> or <b>Backspace</b> key, or we can use the <b>delete tracks</b> button here.</p>
                        <p>Let’s create our first track. In this example, I would like to track the girl’s nose. I am going to use the zoom window to give us a precise location for it. To do the tracking, we use these controls up in the toolbar here. Each of these allows us to say what frames we would like to track. For example, the buttons with the <b>R</b> in them allow us to specify frame ranges. The buttons with the typical playhead arrows allow us to track to the beginning or the end of the shot. The buttons with the vertical bar and the arrows allow us to track backwards and forwards one frame at a time, and very importantly, the <b>stop</b> button allows us to cancel tracking at any point. Let’s just track to the end of this shot, and if we look in the zoom window, we can see that’s doing a pretty good job. So, congratulations -- we have our first track, and that looks pretty good.</p>
                        <p>It’s very important to note that most of these buttons are bound to shortcut keys on the keyboard. For example, if we want to track to the start or the end of the shot we can use the <b>Z</b> or <b>V</b> keys, or if we want to track backwards or forwards one frame we can use the <b>X</b> or <b>C</b> keys.  Let’s track backwards to the beginning of the shot using the <b>Z</b> key. I’m going to cancel that now using the <b>Esc</b> key; this is the same as pressing <b>stop</b> in the toolbar. This <b>Esc</b> key is going to become very important when you start looking at more advanced tracking shots.</p>
                        <p>Now, let’s talk a little bit about how pattern tracking actually works. To do this, let’s go back to our original starting frame and clear all of this track data. We can do this by either scrubbing along the timeline, or a handy shortcut is actually clicking on the keyframe window up here. So we created this keyframe when we started the track, and clicking on it allows us to jump back to frame 165. To clear the track animation path, we can then use this <b>clear all</b> button up here. If we zoom in on this track, we can see three important things: the first is the track position, the second is the pattern window, and the third is this outer search window.</p>
                        <p>The way pattern tracking works is, it grabs this pattern on one frame and then tries to match it within the search window of every other frame. So, you can see if we skip on one frame that our original pattern is contained nicely within the search window here. This is actually really important when we are tracking. One of the main reasons that tracking fails is because the search window is not wide enough to capture the movement between frames. Let me show you an example of this problem in this shot. Let’s pretend that we want to track the toe of this girl, so lets zoom in and create a track. We will resize the pattern window to fit just the toe. If we scrub on one frame, you can see the toe is now completely outside the search window. This means the track has no chance of following it into the next frame, so let’s try that by tracking forwards one frame. You can see the track has completely failed. The key to solving this is to make sure the search window is large enough so that it can contain the toe within the next frame. If we go out here, and make the search window massive like this, we can try to re-track now. You can see now that the toe has been correctly found in the next frame. This is an extreme example to show that high motion needs large search areas.</p>
                        <p>About 90% of all failed tracks can be generally fixed by increasing the search window size to match the amount of motion of the object and also its direction. The next thing to look at is the effect of the pattern window size on the track, so let’s delete this track and go back to our first track. After the search window, the pattern window size is the next most important thing to set for tracking. The pattern window defines exactly what will be tracked. In this example, when we were tracking the nose, we were actually using pixels from the face and the background to help us track. Having a larger pattern window size increases the stability of the track. The problem then is it might not localize the feature you want to track properly. For example, let’s do this track again and I will cancel it mid way. If we look at the zoom window, we can see the track does not exactly follow the tip of the nose properly. This is expected as we are not exactly tracking the pixels of the nose; we are using those of the face and the background as well. Let’s now go back to our start frame, and adjust our pattern window size to fit just those of the nose, and then <b>track forwards</b> and, again, I will press <b>Esc</b> to cancel. Instantly, if we look at our zoom window, we can see we have a much better lock on the tip of the nose.</p>
                        <p>To summarize, always make sure the pattern window size is just big enough to cover the object you want, for example the nose. Using a larger pattern window size might give you a more stable result, the track might appear smoother and less jittery, however, it might not localize the point that you actually want to track well enough. Most importantly, if you find your track is failing for some reason, check to make sure your search window size is large enough to capture the object’s motion. In most cases that I have seen when tracks have failed, they can usually be fixed by just increasing the search window size and then re-tracking.</p>
                        <p>That concludes this tutorial on the basics of the new Tracker in Nuke, and also an introduction into how pattern tracking works. I hope it’s been useful, thanks for watching.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - 2D Tracker: Fixing Problems</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54864269?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54864269" target="_blank">NUKE 7.0 - 2D Tracker - Fixing Problems</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hi, my name is Dan Ring. In this tutorial, I am going to go back to basics, and show you how to spot problems with your tracks and figure out what your track is doing. This is the first step in correcting bad tracks, which we will look at in later tutorials.</p>
                        <p>In the last tutorial, we created a couple of tracks, one in particular on the girls nose. To judge how good the track was, we looked at the zoom window and scrubbed back and forth in the timeline to see a nice and steady image. This way, you can see when the track is drifting very quickly. Another way to get the same stabilize effect is to use this <b>center viewer</b> button here. As the name suggests, this centers the viewer around all of the selected tracks. You can see the entire Viewer is locked to this selected track. The nice thing about using the <b>center viewer</b> option is we get to see the rest of the picture as well as the stabilize tracks. Also if we select multiple tracks, we get to see the average, the stabilized average of both of these tracks. For a more dedicated way to stabilize the image, we can use the Tracker’s own <b>Transform</b> &gt; <b>Stabilize</b> option. We could also create a CornerPin or Transform stabilize node from the <b>Export</b> menu.</p>
                        <p>Looking at stabilized image data is one of the best ways to gauge how well your track is doing. Another very good way is to look at the error values of a track. To show you what I mean, I am going to start a track and pause it halfway through. If we zoom into the bottom left hand corner of the search radical, we can see this magic error value here. The error value measures the image difference between the pattern window at the current frame 165, and the track’s pattern window at the original frame 149. If the object doesn’t change appearance much over time, we expect the error to be quite low. A high error either means the object changes appearance a lot or the track has gone wrong somewhere. The Tracker records the error values for all tracked frames. Now go into the Curve Editor and look at the Error Curves for our track. The thing to note about this Error Curve, which is typical of most Error Curves, is it starts off at around zero and gradually increases as the track goes on. We expect this behaviour as most interesting objects change appearance over time, and this error value measures the change in appearance from our grab frame and our current frame. Things really start to get interesting when we start trying to figure out what these high error value peaks correspond to in our image. Let’s keep this Curve Editor window open here in the corner.</p>
                        <p>We can scrub quickly across the Timeline by dragging this vertical yellow bar. Let’s move it over to our first peak. Looking at the error value here for frame 165, you can see it’s about half that of the maximum error value for this shot. What that means is that we expect the image patch for this frame to be fairly different from the image patch we originally grabbed at frame 149. We can verify this by quickly increasing the <b>keyframe size</b>. True enough we can see that the two patches are fairly different. We can see at the right at frame 149 that part of the ear is occluded, and then uncovered here at frame 165.</p>
                        <p>Let’s move on to our next peak. As expected, the two image patches are very different, even more so than the last time. For example, the hair is no longer occluding the ear, as it was in the previous example. We are also no longer tracking the center of the ear as we were - we are now tracking slightly to the left. So the difference between these two image patches is what gives us our high error value here in the Curve Editor.</p>
                        <p>You can use the Curve Editor to spot problems in the tracks by looking at the Error Curves.  This only gives us part of the picture. What we want to do is get a better idea of how the track is doing over time, where it’s drifting, and by how much. And more importantly, we want that all in the Viewer. To see this, we can toggle this new switch called the <b>show error on track</b> button.  The error is now shown on the animation path of the track in terms of traffic light colors, where red means high error, and green means low error. If we scrub along, you can see instantly how the track is doing. For example, at our high peak you can see the values are red, and on our original peak at frame 165, you can see it’s more orange. But closer to our original frame at 149, it’s more green. One thing to remember here is that there is no objective way to say if a given error value is good or bad. This means that a red color value may mean one track is proceeding nicely, but in another track it means that it has failed. For example, if we go back to frame 200, and look at this red point here, the image patches are quite different as we saw earlier. If we now go back and look at track 1, and go to the regions where the track has turned red, the image patches are still quite similar. Even though this is red, it does not necessarily mean the track has failed or there’s a problem, it just means this is the highest error value we have seen so far for this track.</p>
                        <p>In this tutorial, I have shown you the four main ways of diagnosing track quality: using the zoom window, the <b>center viewer</b> window, the Curve Editor, and the traffic light warning system (<b>show error on track</b>). Being able to spot when and why a track has failed is extremely useful and will save you a lot of time in the future. On top of that, it will help you get the hang of the new keyframe-based tracking workflow that we will present in the next tutorial.</p>
                        <p>Hope you enjoyed this, thanks for watching.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - 2D Tracker: Keyframe Tracking</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54864569?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54864569" target="_blank">NUKE 7.0 - 2D Tracker - Keyframe Tracking</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hi, my name’s Dan Ring and in this tutorial I’m going to be introducing the new keyframe-based tracking workflow. This tutorial relies on a few things that were introduced in previous tutorials, so if you find you don’t quite get something, it’s probably worth going back to previous tutorials and having a look through them.</p>
                        <p>The idea behind keyframe tracking is to lay down keyframes and let the Tracker figure out what happens in between them. Let’s create a new track. This creates our first new keyframe. Then I will jump 25 frames and move the track in order to create a new keyframe. You can see we now have a pair of keyframes. Now, just to make sure both these image patches are the same, I will click on the keyframe patches. You can see that the border of the keyframe turns orange if we are on the same frame as that keyframe. If you look at the zoom window, you can see it’s pretty much in the right spot.</p>
                        <p>To start the keyframe tracking, we go to the top and click the <b>key track current</b> button (<b>Shift</b>+<b>C</b>). This starts the keyframe tracking between the current pair of keyframes. You can see the keyframe track proceeding forwards in the shot, and although it looks like it’s doing the same thing as the auto-track we showed earlier, it is actually trying to match the current pattern window against both search windows of the keyframes, but also keeping the track position of the two keyframes locked. This keyframe tracking workflow if quite powerful, and in particular it allows us to set up our entire track in advance. So, I’m going to do just that and skip on another 25 frames. Create another keyframe, using the zoom window to get a nice and precise lock on the nose. Skip back and forth to ensure we have the same position on each of the keyframes. I will set up 5 keyframes for this example. Now, if we want to track all of the keyframes, use the <b>key track all</b> button (<b>Shift</b>+<b>V</b>). This finds each pair of keyframes and tracks them sequentially, for example, these three pairs. I will also turn on the <b>center viewer</b> button. This allows us to see how the track is doing better.</p>
                        <p>So, already you can see just how powerful this new keyframe tracking workflow is for setting up your whole track in advance, but the really interesting things about this keyframe tracking workflow are yet to come. So let's now delete this track and try something more difficult.</p>
                        <p>Now, for this trickier example I am going to try and track the tattoo on the girl’s arm.  Zoom in and move the Tracker to the top circle of the tattoo, and then adjust the pattern window, so it captures most of the top of the tattoo. I will also make the search window larger, so it captures the motion of the arm. I will start off with an auto-track and see how far that goes. We can look at it in the zoom window, and as you can see, it has already drifted. If you remember from the previous tutorial, we can turn on the traffic light system (<b>show error on track</b>) to see exactly where the track went wrong. To get a better look at our track, I am going to enlarge the zoom window. You can see around the orange and red dots, the track has really drifted. So, what we could do, is go back to our last good frame, click <b>track forwards</b> and hope that it works this time. But we want a better and more deterministic way of solving this problem. To do this, we can use keyframe tracks.</p>
                        <p>Click the <b>set keyframe</b> button, which adds a keyframe at frame 101. We can then jump onto a later frame, for this example I’m going to use frame 128. I will move the Tracker to the top circle of the tattoo. By doing this, we create a new keyframe. Now that we have set up two keyframes around the selected area, from frame 101 to frame 128, I am going to click the <b>key track current</b> (<b>Shift</b>+<b>C</b>) button to track over that difficult region. Instantly, from that error we can see the Tracker has done a much better job. We have a nice, smooth change between the colors of red and green. But, that red area is still not perfect. The really useful thing is now, because we have already made a key track, if we created a new keyframe or nudged the Tracker so it creates a new keyframe, the Tracker will then re-track the affected areas in using the new keyframe. I’m now going to move the tracker to the top section of the tattoo. This creates a new keyframe at frame 113, and then starts re-tracking between our new pairs of keyframes at frames 101 and 113, and 113 and 128. The area that was red has now turned green, but this has flagged up a new red area. You see, the track is not quite on the circle of the tattoo, so move the Tracker to where it should be, let go, and allow it to re-track. Instantly, the red frames have turned green. If you scrub along the timeline, you can see that this track is much better all round, so keyframe tracking has really helped us out here.</p>
                        <p>To give you a better idea of what happens when you re-track, recorded in the last tutorial we looked at the track’s error value using the Curve Editor. This is the Error Curve for our track. You can see a couple of high peaks for our track. These correspond to the yellow frames around here and the animation path. If we scrub to each of these, we can have a look to see what the track is doing. Looking at the zoom window for these two peaks here, you can see the track is a little bit off, but I’m not too concerned about that at the moment. If we go here, you can see the track is way off. It has completely drifted. What we can do now is, again, pull the track into place and allow it to re-track. Now, we have a nice smooth track. It is important to note the height of the Error Curve has now been chopped in half. I will just undo that, so you can see the old curve. You can see we chopped that mountain of error in half. This is a nice way to think about keyframe tracking: every time you move a track, you create a new keyframe. You are imparting new information into the system, which gives you a better overall track. You do this incrementally, so every time you touch the track you improve it. This is a very similar idea to how rotoscoping works: every time you move a control point or create a new keyframe, you end up with a better overall matte.</p>
                        <p>This concludes our tutorial on keyframe tracking, I hope you enjoyed it. Thanks for watching.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - 2D Tracker: Keyframe Tracking Around Occlusions</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54849850?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54849850" target="_blank">NUKE 7.0 - Keyframe Tracking Around Occlusions</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hello, and welcome to this tutorial on keyframe tracking in Nuke 7.0. We have a nasty shot here - there is a lot of movement and it also looks like there’s some rolling shutter and there are two bars that wipe all the way through the whole of the shot. Before going to keyframe tracking, I would just like to approach this the normal way. I will turn off this middle icon here which creates keyframes. You would always get a keyframe on the first frame you track on, so press <b>Shift</b> and create your first track. The image is moving around a lot, so increase your search area and then track forwards and see what happens. And sure enough, as the bar comes through the shot, the track bombs out completely.</p>
                        <p>So let’s see how we would approach this with keyframe tracking, so bring up the Tracker as normal. We would start off in exactly the same way as we would with normal tracking. I will use the <b>Shift</b> key to start a track. Now I have my first keyframe on frame one. As I scroll across the timeline, you can see the bar will come and wipe through, so we know from experience that will not track. I will put a second keyframe here, and now I have two keyframes. These keyframes are giving the Tracker two different patterns to search between, so it knows what’s coming up, effectively. I am going to create another keyframe, right on the last frame of the occlusion. I will create a keyframe so the second pattern is clear, go forward a frame, and create one more keyframe. I have created four keyframes around the occlusion: my last good frame, my first next clean frame, and then two that are problem frames in the middle. Now the problem frames in the middle would throw the tracker off normally, so we would track with an offset at this point.  Obviously, offset trackers only work if the area you are trying to track is within the same plane as the occluded area. Now I will adjust those two patterns to be as close as I can, and go to frame 22. Frame 22 still has an offset, and I have keyframed the offset. As soon as you don’t require the offset, use the <b>clear offset</b> button to get rid of it. So now we have keyframes either side of that occlusion.</p>
                        <p>We head down to a bit further down this shot, create another keyframe, again to help the Tracker. As this boat comes towards us, the pattern it is trying to track has changed, so we will just nudge it along to find the next pattern. I will do the same further down, and I go to the end and give it one last keyframe. Now, I haven't forgotten about the wipe that occurs in the middle, so the beauty of this is I don't need to do this in order, I can set keyframes as I need to. This updates and nudges the other keyframes further down. We are going to do the same thing: I am going to use my last good frame, my next frame which has a problem in it, my next good frame, and I will use my last problem frame. So, good frame, problem frame, problem frame, and good frame. And then offset on the problem frames, check my offsets are good and patterns match.  Go forward a frame and I will turn off the offset, so good frame, bad frame with offset, bad frame with offset, and good frame. So, moving down now I have a keyframe quite close to the other ones, so just go to the top and remove the keyframe. Now I will set my keyframes throughout the whole shot, as there is quite a lot of movement throughout the shot.</p>
                        <p>Now, with the old Tracker I would have been able to adjust the search window and that would have worked for the whole shot, but because this is keyframe tracking, the search area is also keyframed and it only adjusts it on the frame I am on. So, consequently I would have to go through the entire lot and adjust them. Anyway, let’s see how it gets on with the search area that it has. Instead of using the normal tracking button, I will use this new button, <b>key track all</b> (<b>Shift</b>+<b>V</b>). It will track the entire shot. We have one next, <b>key track current</b> (<b>Shift</b>+<b>C</b>). This will track the keys either side of the keyframe you are on. So if I will have a keyframe on frame 1 and a keyframe on frame 30, and I was on frame 20, it would track from frame 1 to 30, for example. In this case, I want to track all of them, so I will press go. Now I want to check my track. What I like to do is use the zoom window and scroll through and see how it’s gone. It’s done a pretty good job all the way through. I can also tell on the traffic light system (<b>show error on track</b>), and this shows me green for low errors, red for high errors, and yellow for in between errors. An error does not necessarily mean a bad track. It can mean there was a good track, but it found the pattern to be different but still got the track correct. You need to check to see if the error is actually causing you an issue. I can see my track has gone wrong, so what can I do about it? The first thing I can do is figure out why it has gone wrong. It is clear my search area is not really wide enough at this point. Now, because I have this function on, <b>re-track when keyframe is moved</b>, this means if I make any adjustments to the Tracker between track keyframes, it will automatically fire off a re-track. My nearest frames are frame 100 and 128. I am just going to expand the search window at this point, and it has kicked off a re-track between those keyframes. Frame 19 has been added in the middle there.</p>
                        <p>Now I can see it has given me a good track for those bad frames. So the proof is in the pudding, so lets stabilize it. I am using <b>Stabilize 1pt</b> here, as if I only have 1 tracker. It will give us the best result, as it basically locks the filter to keys. It’s done a pretty good job of those occlusions. Now the shot is stabilized, we can see how bad the rolling shutter is, so it’s possible we could have sent this shot through correction before working on it. With keyframe tracking, we are effectively nudging the tracker into the right direction throughout the shot to achieve a good track.</p>
                        <p>This is Howard Jones for Foundry, goodbye.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - 2D Tracker: Combined Trackers</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54850746?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54850746" target="_blank">NUKE 7.0 - Combined trackers</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hello! In this tutorial, I would like to show a combined workflow between the Tracker, CameraTracker, and Roto. Here we have a hand-held shot, essentially I would like to get a camera track out of this, but the people will interfere with the camera track, so we need to roto them out. I will use keyframe tracking to get a rough track of their positions. I don’t need to be particularly accurate, as I am only going to garbage matte out the people.</p>
                        <p>So, I have created four keyframes on my first track, first track done. Then I create a second track on this guy here, go through and make keyframes, and click <b>key track all</b>. The last guy is more problematic because he gets occluded. Now, I don't really need to worry too much about dealing with occlusion the way I would have done before. I am just going to switch to a different pattern halfway through and then go back because again I only need a rough garbage matte throughout. Let’s see how that does. So I am expecting this track to jump a bit. The question is if it jumping is going to cause me an issue or not?  I think that will be pretty good.</p>
                        <p>So I will bring up a Roto now, and just do a quick garbage around the first guy. I will put him into his own group, and then I will select <b>Link to &gt; Tracker 1</b> &gt; the first track. It immediately pushes the roto off, so I’m going to use its own transform to push it back again. Again, do the same for the second guy. I accidentally put him in the wrong group, so move him back to <b>Root</b> and create new layer, again go to <b>Link to &gt; Track 2</b>, go back to its own positioning, and put the roto back.  Lastly I deal with the third guy, remember this is more of a problematic track and it’s less accurate. Again I put him in his own group, then <b>Link to &gt; Track 3</b>, and again put the shape back where we started. As we can see, that track is good enough to cover him throughout again, as we are only garbage matting him.</p>
                        <p>Now, one other point, what I need to do is ensure I have a track point up at the top here, within my CameraTracker. Now you can see tracks within my CameraTracker, but these don’t always remain, so I’m going to use a User Track to isolate this point. I need to be a bit more accurate with my keyframes, as I want to place CG there. I have only keyed 60 frames, not the whole lot this time, but I will key track them anyway and just track those 60 frames. Looking at the traffic lights, we can see the issues caused by motion blur, and actually even though it has gone red it’s a good track.</p>
                        <p>I’m going to bring up a CameraTracker now. You want to mask out the people, so go to <b>Mask &gt; Mask Alpha</b>. We also want to create a User Track. Just expand this out, so you can read the buttons. Click the <b>Add User Track</b> animation button, then <b>Link to &gt; Track 4</b>.  However, I find the CameraTracker does not work if it is a link, so I will turn this into keyframes: <b>Edit &gt; Generate &gt; Generate Keys</b> from 1 to 60.  I have a problem at the end when the interpolation carries on, so I will go to <b>Interpolation &gt; After/Constant</b>, and in the CameraTracker we will use that information. Now click <b>Track Features</b>. Essentially, we are trying to get a lock on that point, so we know we can put an object there later on. Now that we have a point that we can create an object for, right-click on the point and select <b>create &gt; sphere</b>.  So lets go back into the CameraTracker and create a Camera, bring up a Scene, and through this we will be able to check the integrity of this track.</p>
                        <p>So, through using the Tracker in a combination with Roto we have been able to garbage out the people, and we have also added a User Track to the CameraTracker, so we have been able to put an object in a position of our choice.</p>
                        <p>This is Howard Jones for Foundry, goodbye.</p>
                    </div>
                </div>
            </div>
        </div>
        <table style="width: 100%;border-bottom-style: solid;border-bottom-width: 1px;">
            <col />
            <tbody>
                <tr>
                    <td>
                        <p>&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="MCDropDown MCDropDown_Open dropDown dropDownMiniTOCmenu"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_MiniTOCmenu MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../Skins/Default/Stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Topics In This Section</a></span>
            <div class="MCDropDownBody dropDownBody">
            </div>
        </div>
    </body>
    <script type="text/javascript">/* <![CDATA[ */
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-60569477-1', {'cookieDomain': 'none'});
	/* ]]> */</script>
    <script type="text/javascript">/* <![CDATA[ */
		$("document").ready(function ()
		{
		function postMe()
		{
		var cust = document.getElementById("search-field").value;
		console.log(cust);
		ga('send', 'event', "Nuke", "search", cust, 9);
		}
		var submitButton = $(".search-submit");
		submitButton.click(function() { postMe(); return true; } );
		var submit = $("input#search-field");
		submit.keypress(function(e) { if(e.keyCode==13) { postMe(); } return true; } );
		});
	/* ]]> */</script>
</html>