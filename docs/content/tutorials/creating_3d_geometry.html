<!DOCTYPE html>
<html xmlns:MadCap="http://www.madcapsoftware.com/Schemas/MadCap.xsd" lang="en-us" xml:lang="en-us" data-mc-search-type="Stem" data-mc-help-system-file-name="Default.xml" data-mc-path-to-help-system="../../" data-mc-target-type="WebHelp2" data-mc-runtime-file-type="Topic" data-mc-preload-images="false" data-mc-in-preview-mode="false" data-mc-toc-path="Tutorials|Video Tutorials|Compositing with Nuke">
    <head>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta charset="utf-8" />
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><title>Creating and Editing 3D Geometry</title>
        <link href="../../skins/default/stylesheets/Slideshow.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/TextEffects.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/Topic.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/components/styles.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/components/tablet.css" rel="stylesheet" />
        <link href="../../skins/default/stylesheets/components/mobile.css" rel="stylesheet" />
        <link href="../assets/stylesheets/nuke_stylesheet.css" rel="stylesheet" />
        <script src="../../Resources/Scripts/custom.modernizr.js">
        </script>
        <script src="../../Resources/Scripts/jquery.min.js">
        </script>
        <script src="../../Resources/Scripts/require.min.js">
        </script>
        <script src="../../Resources/Scripts/require.config.js">
        </script>
        <script src="../../Resources/Scripts/foundation.min.js">
        </script>
        <script src="../../Resources/Scripts/plugins.min.js">
        </script>
        <script src="../../Resources/Scripts/MadCapAll.js">
        </script>
        <script src="../assets/stylesheets/load.js">
        </script>
    </head>
    <body>
        <p class="MCWebHelpFramesetLink MCWebHelpFramesetLinkTop"><a href="../../Default.html#tutorials/creating_3d_geometry.html">Open topic with navigation</a>
        </p>
        <script>/* <![CDATA[ */
			$(document).ready(function(){ 
			$('.dropDownMiniTOCmenu:not(:has([class*="MCMiniTocBox"]))').remove();
			});
		/* ]]> */</script>
        <div class="nocontent">
            <div class="MCBreadcrumbsBox_0 breadcrumbs" data-mc-breadcrumbs-divider=" &gt; " data-mc-breadcrumbs-count="3" data-mc-toc="True"><span class="MCBreadcrumbsPrefix">You are here: </span>
            </div>
        </div>
        <h2>Creating and Editing 3D Geometry</h2>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 8.0 - EditGeo
				</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="http://player.vimeo.com/video/81086691?byline=0&amp;portrait=0&amp;color=f9b41b" width="500" height="281" frameborder="0" webkitallowfullscreen="true" mozallowfullscreen="true" allowfullscreen="true"></iframe>
                <p><a href="https://vimeo.com/81086691" target="_blank">EditGeo - NUKE 8 Tutorial</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 8.0 - ModelBuilder: UV&#160;Creation</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/81086575?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/81086575" target="_blank">UV Creation - NUKE 8 Tutorial</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - ModelBuilder: Alignment and Positioning</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/54932162?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/54932162" target="_blank">NUKE 7.0 - ModelBuilder - Alignment &amp; Positioning</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hello everybody, and welcome to this tutorial on the new ModelBuilder node for Nuke 7.0. My name’s Jon, and in this video I’m going to show you how to create and line up geometry using the <b>Align Mode</b> in the ModelBuilder.</p>
                        <p>First of all, let’s take a look at the node. For the line-up, I’m going to need the match-moved Camera for the shot. Image modeling always works best if you have removed any lens distortion from your plate first, otherwise you are going to find you can’t line up your geometry at the edges of the image where it’s most distorted. In the properties panel for the ModelBuilder, you can see that you get a <b>Scene Graph</b> to lay out the geometry you create.</p>
                        <p>Here’s one we have already done. You can create groups, and organize geometry here. You can also delete and duplicate, and you can toggle the visibility of different parts of your scene on and off. Now, the most important thing to set in the new ModelBuilder node is this <b>Distance</b> parameter. This defines the size of the world you are working in, and it is easy to set. If I unlock (<b>Ctrl</b>/<b>Cmd</b>+<b>l</b>) from the Camera and zoom out, I can review the movement I have on the match-moved Camera. You can see that the scale is around 1 here, so I will set the distance to 10 for this shot as it is the maximum distance I need to work with. You will see that the ModelBuilder has two toolbars. On the left, you can add new shapes and you can select whether to work in an <b>Align Mode</b> where you line up shapes to your footage, or in <b>Edit Mode</b> where you modify the geometry. In the <b>Edit Mode</b>, you can switch between the different selection methods for the 3D Viewer. If I switch to the <b>Align Mode</b>, the Model Builder will lock you to the match-moved Camera. Now, all the alignment has been done in the 3D Viewer, so you need to be locked to the Camera and viewing the ModelBuilder node to bring up your image as an overlay to do your line-up. I use <b>Ctrl</b>/<b>Cmd</b>+<b>l</b> to quickly toggle the lock on and off. You will see on the top toolbar that you can choose whether to <b>Align</b> whole objects (<b>Object Transform</b>) or to work on individual vertices (<b>Vertex Position</b>). You can also configure the zoom window that is displayed to assist in the alignment.</p>
                        <p>Let’s start by adding a simple point to our scene. I select from the <b>Shape</b> menu and click in the Viewer to create a new shape. I now have a new point. You can see that the <b>Alignment Mode</b> brings up a handle for the position of the vertices in your geometry.  I can pick this up and position the vertex in the image. The zoom window here allows you to review and fine-tune the vertex positions. So that’s the position in this frame, I now need to go to another frame and drag that vertex to the right location, that creates the 3D position. From just 2 frames, I am now locked down to the shot. It is always a good idea to use 3 frames at least as this is going to give you more accurate 3D locations. You can review this by flipping between the keys. You can also look at other frames and, if you need to, you can insert additional keys to correct the 3D position.</p>
                        <p>When you are aligning, you will see there are guidelines here so you can drag vertices while respecting the positions you have defined at other frames. If you need to, you can hold down <b>Shift</b> and drag off this guideline, but it is usually best to leave the vertex on this guideline for the best result fitting all of your keys. Here we have a point in the scene, you can see it in 3D, and you can use this as a locator to help lay out elements for the shot, for example.</p>
                        <p>So let’s do something more interesting and add a card to the front of this wall. I select <b>Card</b> from the <b>Shape</b> menu and I click to create, but now I can drag to set the right size to work with. I need to position the vertices of the card, and it’s important here to select real points in the world that you can find in several frames. So I need to pick up the corners and position them correctly, and I need to go to another frame to lock down the 3D location. I can fine-tune with the zoom window. With just two frames here, I’m locked to the shot but I’m going to add a 3rd frame just to make sure I have an accurate 3D location. So, now I have a card to work with on that wall.  Often, you will find, though, that you can’t pick up nice corners to work with. The corners of this wall are obscured. One trick to remember is that you can switch to the <b>Edit Mode</b> and select the objects and scale them to position however you want. I can take my card and turn it into a larger wall. So that’s the basics of working with the <b>Align Mode</b>, you need to position vertices at several frames to lock down the 3D location.</p>
                        <p>You will see we have been working on the <b>Object Transform</b> here. Working with the <b>Object Transform</b> preserves the shape of the object whilst you are doing your line-up. You can switch to aligning individual vertices by selecting a line vertex position here. Each vertex is treated as a point and you can pick up a vertex to position it independently, so I can create the 3D location of this vertex and this allows you to generate more organic shapes to work with. The thing to be aware of though in vertex positioning is that you can get a distorted shape in 3D. Even though the vertex looks correct in the image, because it’s been moved independently, the geometry can become twisted. Wherever possible, align your <b>Object Transform</b> so you preserve the shape of your geometry. That will work for all the shapes in the <b>Shape</b> menu.</p>
                        <p>The <b>Polygon</b> works slightly differently. To create a <b>Polygon</b>, click in the image to locate the vertices, selecting specific image locations for each vertex. You can use <b>Enter</b> here to complete the shape creation. You then have to use <b>Vertex Alignment</b> so you get the correct 3D shape of your <b>Polygon</b>. This works very much like the original Modeler node in Nuke 6.0. I can position each vertex, but the thing to be aware of is when you switch to <b>3D</b>, you can create twisted geometry. One handy trick to remember though: you can create shapes on top of existing geometry. If I create a <b>Polygon</b> now, I will hold down the <b>Shift</b> key and the cursor hits the geometry I have in the scene so that I can create the vertices directly on top of the <b>Card</b>. So, here I have created a <b>Polygon</b> without aligning the individual vertices, and my geometry is no longer twisted.</p>
                        <p>Just to finish off I would like to show you a trick you can use to line up geometry with the new PointCloudGenerator in Nuke 7.0. Let’s have a look at the point cloud for the shot. You will see it has already been labeled here for the different elements of the scene. I can go on the PointCloudGenerator and toggle the visibility off to look at different points of the point cloud. What I can do is switch to <b>Vertex Selection</b>, and I can view the PointCloudGenerator and select points. Then, in ModelBuilder, I can select a shape to automatically fit to the points. I can then edit and shift it around if I wish. Similarly, I can do this for the tower. I can select points on the PointCloudGenerator, then I can go back to ModelBuilder, create a <b>Cylinder</b> to snap to those points, and I can go in and edit. So we have quickly placed geometry to start doing our modeling for this shot.</p>
                        <p>Thank you very much for listening, and I hope you have enjoyed this tutorial.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadNoBold"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Nuke 7.0 - ModelBuilder: Editing Geometry</a></span>
            <div class="MCDropDownBody dropDownBody"><iframe src="https://player.vimeo.com/video/55033741?color=f9b41b;byline=0;portrait=0" width="500" height="281" frameborder="0" webkitallowfullscreen="" mozallowfullscreen="" allowfullscreen=""></iframe>
                <p><a href="https://vimeo.com/55033741" target="_blank">NUKE 7.0 - ModelBuilder - Editing Geometry</a> from <a href="https://vimeo.com/thefoundry" target="_blank">Foundry</a> on <a href="https://vimeo.com/" target="_blank">Vimeo</a>.</p>
                <div class="MCDropDown MCDropDown_Open dropDown"><span class="MCDropDownHead dropDownHead dropDownHeaddropDownHeadIndented"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" /><span class="Master_VariablesTranscribedContent">Transcription</span></a></span>
                    <div class="MCDropDownBody dropDownBody">
                        <p>Hello everyone, welcome to this tutorial on the new ModelBuilder node in Nuke 7.0. My name’s Jon, and in this video I am going to show you how to create and manipulate geometry using the <b>Edit Mode</b> in the ModelBuilder.</p>
                        <p>When you create a ModelBuilder you start off in <b>Align Mode</b>. If you hook up some footage to the <b>src</b> input and a match-moved Camera to the <b>cam</b> input, you can use the <b>Align Mode</b> to create geometry and line this up to your shot. There is also a <b>geo</b> input here, that allows you to pull in geometry with vertex normals to assist in positioning objects. Take a look at our tutorial on Alignment and Positioning to find out more about how to do this in <b>Align Mode</b>.</p>
                        <p>Now you can also work in <b>Edit Mode</b> to create geometry directly in the 3D Viewer.  I can select a new shape and position on the ground plane here using a single click to create, and dragging to set the size. If you hold down the <b>Shift</b> key, you can also ‘hit test’ against existing geometry when creating your shapes, so I can click on the cube and place a cone. On the top toolbar you can switch between the display settings for the geometry. One thing to remember is you can switch on the <b>headlamp</b> in the Viewer settings (<b>3D</b> tab) if you want to work with a solid display. Let’s switch back to working with <b>wireframe</b>. Now, on the left-hand toolbar, you can see there is a shortcut menu to select between the different selection methods. If I choose <b>Select objects</b>, I can go and pick up my shapes and move them around using the translation handle. A good trick here is if you hold down <b>Ctrl</b>/<b>Cmd</b>+<b>Alt</b>, you can pick up the pivot point and move it in the scene. You can also locate it on geometry, so now I can scale up from the corner of this cube. You can also rotate that pivot point. If you hold down <b>Ctrl</b>/<b>Cmd</b>+<b>Alt</b>+<b>Shift</b>, I can rotate that pivot and now I have a new handle to translate, scale, or rotate. One thing to remember when you are working with selection is, by default, the Viewer will test for occlusions. If you want to select back faces or edges for example, you need to disable <b>Occlusion Testing</b> in the Viewer. Now you can go in and select through the object, so I can pick up some back edges.</p>
                        <p>Once you have some geometry to work with, you can access all the editing options through the right-click context menu. Here, you can switch through the selection methods as well as the mode you are working in and you also have a set of actions you can perform, dependent on the selection method. So, in <b>Select vertices</b> I can <b>carve</b>, <b>extrude</b>, and <b>bevel</b>. In <b>Select edges</b>, I can <b>carve</b>, <b>extrude</b>, <b>bevel</b>, and <b>subdivide</b>. There are also some handy shortcuts here to <b>select edge loop</b> and <b>select edge ring</b>. In <b>Select faces</b>, I can <b>carve</b>, <b>extrude</b>, <b>merge</b>, <b>bevel</b>, and <b>tessellate</b>. And, finally, in <b>Select objects</b> I can <b>carve</b> and I can also <b>mirror</b>. Use <b>mirror</b>, for example, to model symmetric objects by modeling one half first, duplicating, then mirroring.</p>
                        <p>Let’s look at an example. If I go to <b>Select edges</b> and select this edge, and then <b>subdivide</b>, I have started an <b>Edit</b> action. This will bring up the <b>Editing</b> controls in the top toolbar so I can edit the action and when I am happy, I can complete hitting <b>Return</b>. You can also hit <b>Esc</b> to cancel. So, here I have inserted symmetric vertices on the edge. Now let’s try doing a <b>Bevel</b> action. If I select this edge (<b>Select edges</b>) and then <b>Bevel</b>, I have now brought up the controls. I can set the roundness (<b>round level</b>), this controls the number of edges, and the size of the bevel. I am going to use <b>Esc</b> now to cancel.</p>
                        <p>Let’s have a look at carving now. If I start a <b>Carve</b> action, I can click on my geometry and insert additional vertices to cut out new geometry. One thing to watch out for here, is to make sure you click on your geometry rather than outside when inserting vertices, and a trick you can use is to hold down <b>Ctrl</b>/<b>Cmd</b>+<b>Shift</b> to automatically insert vertices as you drag over the geometry. And, as before, you can use <b>Return</b> to finish your <b>Carve</b> action or <b>Esc</b> to cancel.</p>
                        <p>Now, the final thing I am going to show you is in <b>Select faces</b>; there is a shortcut key for <b>Extrusion</b>. Here you can use <b>Return</b> to quickly <b>Extrude</b> a selected face, or set of faces, to quickly build up your geometry.</p>
                        <p>So, that’s the basics of geometry editing. Let’s see how we can use that to do some clean plate work for this shot. I want to build some geometry and do some projections. I have a ModelBuilder node connected to my footage and a match-moved Camera, so I want to set it up for my shot. Let’s review my Camera move. So, you can see the scale here is around 100. I will have to go in and update my <b>far</b> clipping plane (in the Viewer properties); let’s use 10,000 there. I also need to set the <b>Distance</b> parameter on the ModelBuilder node. I like to use 10 times the scale as the maximum distance I need to work with so 1,000 here.</p>
                        <p>The first thing I want to do is model a back wall, so I will use the <b>Align Mode</b> to place a card and lock it down to the shot. The tutorial on alignment will tell you how to do this. What we are going to do is place a few corners and then skip forwards, so we have aligned these corners and now we have a card locked to the shot, but that’s on the window pane. So, what I’m going to do is place a point as a <b>Locator</b> on the wall, then I am going to pick up my card on the window pane, scale it up and get it into position for the shot. Then I’m going to switch out to 3D and then move the card off from the window pane to the front of the wall. So, now I have a card on the plane of the wall to work with, I can edit this card to model the shape of the wall. The first thing I'm going to do is line up the edges of the card to the window frames. You can use <b>Drag Select</b> or hold down <b>Shift</b> to do multiple selections and you can also use <b>Alt</b>+<b>Shift</b> to remove from a selection if you need to. A handy trick here though, is to select a single edge and then use <b>select edge loop</b> to quickly pick up the edges so you can place them. Now, you see I don't have enough edges in the card for the window frame here, so I’m going to insert some vertices by subdividing these edges and then I will use <b>carve</b> to connect the new vertices together. Now I have a new edge to work with, I can pick it up and move it to the right location. And, finally, I am going to place this edge for the windowsill. To create the inset windows, I can switch to <b>Select faces</b>, select these faces and <b>merge</b> them so I can pick each one up, <b>extrude</b> it back, and position on the back window pane again. So now we have our inset windows, and we have the geometry we need for the back wall.</p>
                        <p>Next up, I want to create some geometry for the bed. So I first lock down my geometry using alignment, and here I am going to start with a card on the top of the bed. I position the corners and now I have a card positioned next to the wall and I can switch to edit this, to create the shape I need. I pick up that front edge and <b>extrude</b> it down, then I pick up the corner edge and <b>bevel</b> it to create a smooth shape. This gives me the surface of the bed.</p>
                        <p>Finally, I’m going to model a fan on the bed. I will use alignment to position a cube over the front face of the fan. So again, position the corners and once we have a cube, I will go in and edit, select the edges and use <b>bevel</b> here to create the roundness of the corners. Now we have the fan.</p>
                        <p>Now we have all the geometry, let’s see how that looks in 3D. You can select from the ModelBuilder and hit <b>Bake</b> (Selected geometry) to create a separate node. You can also use <b>Bake</b> (Projection) to create a projection group for a particular frame. Here is one I have created before, for frame 1. So what we are going to do is take our baked scene geometry, hook it up, and render it out with a ScanlineRender node.</p>
                        <p>So you can see that in just a few minutes we have aligned and edited the geometry we needed to set up projections for this shot, and we did it all inside Nuke using the ModelBuilder node. Thank you for listening and I hope you enjoyed the tutorial.</p>
                    </div>
                </div>
            </div>
        </div>
        <table style="width: 100%;border-bottom-style: solid;border-bottom-width: 1px;">
            <col />
            <tbody>
                <tr>
                    <td>
                        <p>&#160;</p>
                    </td>
                </tr>
            </tbody>
        </table>
        <div class="MCDropDown MCDropDown_Open dropDown dropDownMiniTOCmenu"><span class="MCDropDownHead dropDownHead"><a href="javascript:void(0);" class="MCDropDownHotSpot dropDownHotspot MCDropDownHotSpot_ MCDropDownHotSpot_MiniTOCmenu MCHotSpotImage"><img class="MCDropDown_Image_Icon" src="../../skins/default/stylesheets/Images/transparent.gif" height="13" width="16" alt="Closed" data-mc-alt2="Open" />Topics In This Section</a></span>
            <div class="MCDropDownBody dropDownBody">
            </div>
        </div>
    </body>
    <script type="text/javascript">/* <![CDATA[ */
		(function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
		(i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
		m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
		})(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
		ga('create', 'UA-60569477-1', {'cookieDomain': 'none'});
	/* ]]> */</script>
    <script type="text/javascript">/* <![CDATA[ */
		$("document").ready(function ()
		{
		function postMe()
		{
		var cust = document.getElementById("search-field").value;
		console.log(cust);
		ga('send', 'event', "Nuke", "search", cust, 9);
		}
		var submitButton = $(".search-submit");
		submitButton.click(function() { postMe(); return true; } );
		var submit = $("input#search-field");
		submit.keypress(function(e) { if(e.keyCode==13) { postMe(); } return true; } );
		});
	/* ]]> */</script>
</html>